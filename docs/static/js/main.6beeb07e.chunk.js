(this["webpackJsonpheating-visualization"]=this["webpackJsonpheating-visualization"]||[]).push([[0],{192:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(3),o=n.n(a),i=n(71),c=n.n(i),l=(n(192),n(2)),s=n(1),u=(n(194),{all:["coal","peat","oils","naturalgas","industryreactions","wood","nuclear","electricityimport","hydro","wind","heatpumps","other"],heating:["coal","peat","heavyoil","lightoil","naturalgas","recoveredfossil","woodsmall","recoveredbio","heatpumps"],electricity:["nuclear","electricityimport","hydro","wind","solar"],traffic:["gasoline","diesel","biogasoline","biodiesel","biogas"]}),f=function(e){return{date:new Date(+e.year,0,1),oils:+e.oilstotal,coal:+e.coaltotal,naturalgas:+e.naturalgas,nuclear:+e.nuclearenergy,hydro:+e.hydropower,wind:+e.windpower,wood:+e.woodtotal,peat:+e.peat,heatpumps:+e.heatpumps,other:+e.recoveredrecycledtotal,industryreactions:+e.industryreactions,electricityimport:+e.electricityimport,gasoline:+e.gasoline,biogasoline:+e.biogasoline,diesel:+e.diesel,biodiesel:+e.biodiesel,lpg:+e.lpg,lightoil:+e.lightfueloil,heavyoil:+e.heavyfueloil,otheroils:+e.otheroils+ +e.biofueloil+ +e.recycledoil+ +e.refinerygas,woodsmall:+e.woodsmall,woodindustry:+e.blackliquor+ +e.woodindustry,recoveredfossil:+e.recoveredfossil+ +e.demolitionfossil+ +e.otherwastefuels,recoveredbio:+e.recoveredbio+ +e.demolitionbio+ +e.otherbioenergy,biogas:+e.biogas,solar:+e.solarenergy,hydrogen:+e.hydrogen}},d={all:["coal","peat","heavyoil","lightoil","transportoil","naturalgas","otherfossil","wood","otherbio"],heating:["coal","peat","heavyoil","lightoil","naturalgas","otherfossil","otherbio"],electricity:["coal","peat","heavyoil","lightoil","naturalgas","otherfossil"],traffic:["transportoil"]},j=function(e){return{date:new Date(+e.year,0,1),heavyoil:+e.heavyfueloil,lightoil:+e.lightfueloil+ +e.otheroils,transportoil:+e.transportfuels,coal:+e.coal+ +e.othercoals,naturalgas:+e.naturalgas,peat:+e.peat,otherfossil:+e.year<1990?+e.total:+e.otherfossilfuels+ +e.co2transfer,wood:+e.woodfuels,otherbio:+e.othernonfossilfuels}},b=n(4),h=function(e,t,n,r,a){var o=function(e,n,a){return t*n+r*a[e]},i=Object.entries(n).filter((function(t){var n=Object(l.a)(t,2),r=n[0];n[1];return"date"===r||e.includes(r)})).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return[n,"date"===n?new Date(o(n,r,a)):o(n,r,a)]}));return{values:Object.fromEntries(i),rank:i.filter((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return"date"!==n&&r>0})).sort((function(e,t){return t[1]-e[1]}))}},O=function(e,t,n){var r,a=[],o=Object(b.a)(Object(s.k)(e));try{for(o.s();!(r=o.n()).done;)for(var i=Object(l.a)(r.value,2),c=i[0],u=i[1],f=0;f<n;++f){var d=f/n,j=1-d;a.push(h(t,j,c,d,u))}}catch(O){o.e(O)}finally{o.f()}return a.push(h(t,0,e[e.length-2],1,e[e.length-1])),a},g=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=Object(s.h)(.44-.4*n/e.length);return t},p={oils:"Oil",heavyoil:"Heavy fuel oil",lightoil:"Light fuel oil",transportoil:"Transport fuels",coal:"Coal",naturalgas:"Natural gas",industryreactions:"Industry reactions",peat:"Peat",otherfossil:"Other fossil fuels",wood:"Wood",otherbio:"Other non-fossil fuels",nuclear:"Nuclear energy",hydro:"Hydro power",wind:"Wind power",heatpumps:"Heat pumps",electricityimport:"Electricity import",other:"Recycled sources",gasoline:"Gasoline",biogasoline:"Gasoline bio component",diesel:"Diesel",biodiesel:"Biodiesel",lpg:"Propane",otheroils:"Other oils",woodsmall:"Wood small-scale",woodindustry:"Wood industrial",recoveredfossil:"Fossil waste",recoveredbio:"Non-fossil waste",biogas:"Biogas",solar:"Solar energy",hydrogen:"Hydrogen"},v=function(e){var t=e.data,n=e.frame,o=e.pause,i=e.setPause,c=e.setFilter,l=Object(a.useRef)(),s=t.length>0?t[n].values.date.getFullYear():void 0;return Object(r.jsxs)("div",{className:"Year",children:[Object(r.jsx)("h1",{children:s}),Object(r.jsx)("button",{onClick:function(){return i(!o)},children:o?"\u25b6":"\u25a0"}),Object(r.jsxs)("select",{ref:l,onChange:function(){return c(l.current.value)},children:[Object(r.jsx)("option",{value:"all",children:"All"}),Object(r.jsx)("option",{value:"heating",children:"Heating"}),Object(r.jsx)("option",{value:"electricity",children:"Electricity"}),Object(r.jsx)("option",{value:"traffic",children:"Traffic"})]})]})},m=function(e){var t=e.unit,n=e.data,o=e.frame,i=e.setFrame,c=e.keys,l=e.colors,u=e.target,f=Object(a.useRef)();return Object(a.useEffect)((function(){if(0!==n.length){var e=f.current.clientWidth-60-10,t=f.current.clientHeight-10-30,r=Object(s.q)(f.current).select(".wrap"),a=Object(s.r)().keys(c)(n.map((function(e){return e.values}))),d=Object(s.p)().domain(Object(s.f)(n.map((function(e){return e.values.date})))).range([0,e]),j=Object(s.o)().domain([0,Object(s.j)(a,(function(e){return Object(s.j)(e.map((function(e){return e[1]})))}))]).range([t,0]);r.select(".xaxis").call(Object(s.b)(d)),r.select(".yaxis").call(Object(s.c)(j)),r.select(".fills").selectAll(".area").data(a).join("path").attr("class","area").style("fill",(function(e){return l[e.key]})).attr("d",Object(s.a)().x((function(e){return d(e.data.date)})).y0((function(e){return j(e[0])})).y1((function(e){return j(e[1])}))),r.select(".year").call((function(e){return e.transition().duration(250).ease(s.e).attr("x",d(n[o].values.date))})),r.on("mousedown",(function(t){t.preventDefault(),Object(s.q)(window).on("mousemove",(function(t){var r=Object(s.q)(f.current).node().getBoundingClientRect(),a=Math.max(Math.min(Object(s.l)(t)[0]-r.x-60,e-1),0);i(Math.floor(a/e*n.length))})).on("mouseup",(function(){Object(s.q)(window).on("mousemove",null).on("mouseup",null)}))})),void 0!==u&&r.selectAll(".target").data([u]).join("rect").attr("class","target").attr("y",(function(e){return j(e)}))}}),[n,o,i,c,l,u]),Object(r.jsx)("div",{className:"Timeline",children:Object(r.jsx)("svg",{ref:f,children:Object(r.jsxs)("g",{className:"wrap",children:[Object(r.jsx)("text",{className:"unit",children:t}),Object(r.jsx)("g",{className:"xaxis"}),Object(r.jsx)("g",{className:"yaxis"}),Object(r.jsx)("g",{className:"fills"}),Object(r.jsx)("rect",{className:"year"})]})})})},y=function(e){var t=e.data,n=e.frame,o=e.setFrame,i=e.pause,c=e.names,u=e.colors,f=e.reverse,d=Object(a.useRef)();return Object(a.useEffect)((function(){if(0!==t.length){var e=d.current.clientWidth,r=d.current.clientHeight,a=t.length-1,j=Object(s.q)(d.current),b=Object(s.o)().domain([0,Object(s.j)(t,(function(e){return Object(s.j)(e.rank.map((function(e){var t=Object(l.a)(e,2);t[0];return t[1]})))}))]).range(f?[e,0]:[0,e]),h=Object(s.n)().domain(Object(s.m)(8)).range([0,r]).padding(.1),O=j.transition().duration(250).ease(s.e),g=h.bandwidth(),p=.4*g,v=function(e){return e+p},m=function(e){return f?e-p/4:e+p/4},y=function(e,r){return n>0&&t[n-1].values[e]||0},x=function(e,r){return n<a&&t[n+1].values[e]||0},w=f?function(e){return b(e)}:function(e){return b(0)},N=f?function(e){return Math.max(b(0)-b(e),0)}:function(e){return Math.max(b(e)-b(0),0)},F=Object(s.g)(",d"),k=function(e,t){var n=Object(s.i)(e,t);return function(e){this.textContent=F(n(e))}};j.selectAll(".bar").data(t[n].rank.slice(0,8),(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return n})).join((function(e){return e.append("rect").attr("fill",(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return u[n]})).attr("class","bar").attr("x",(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return w(y(n))})).attr("y",(function(e){return r})).attr("width",(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return N(y(n))})).attr("height",g)}),(function(e){return e}),(function(e){return e.call((function(e){return e.transition(O).attr("x",(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return w(x(n))})).attr("y",(function(e){return r})).attr("width",(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return N(x(n))})).remove()}))})).call((function(e){return e.transition(O).attr("x",(function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);return w(n)})).attr("y",(function(e,t){return h(t)})).attr("width",(function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);return N(n)}))})),j.selectAll(".label").data(t[n].rank.slice(0,8),(function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return n})).join((function(e){return e.append("text").attr("class","label").attr("text-anchor",!0===f?"end":"start").text((function(e){var t=Object(l.a)(e,2),n=t[0];t[1];return c[n]})).attr("x",m(b(0))).attr("y",(function(e){return v(r)})).call((function(e){return e.append("tspan").attr("x",m(b(0))).attr("dy","1.15em")}))}),(function(e){return e}),(function(e){return e.call((function(e){return e.transition(O).attr("y",(function(e){return v(r)})).remove().call((function(e){return e.select("tspan").tween("text",(function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return k((y(n),r))}))}))}))})).call((function(e){return e.transition(O).attr("y",(function(e,t){return v(h(t))})).call((function(e){return e.select("tspan").tween("text",(function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return k(y(n),r)}))}))})),!i&&n<a&&O.on("end",(function(){return o(n+1)}))}}),[t,n,o,i,c,u,f]),Object(r.jsx)("div",{className:"BarChartRace",children:Object(r.jsx)("svg",{ref:d})})},x=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)([]),c=Object(l.a)(i,2),b=c[0],h=c[1],x=Object(a.useState)([]),w=Object(l.a)(x,2),N=w[0],F=w[1],k=Object(a.useState)([]),S=Object(l.a)(k,2),E=S[0],C=S[1],B=Object(a.useState)({}),D=Object(l.a)(B,2),H=D[0],T=D[1],q=Object(a.useState)({}),A=Object(l.a)(q,2),M=A[0],P=A[1],R=Object(a.useState)(0),W=Object(l.a)(R,2),I=W[0],Y=W[1],J=Object(a.useState)(!1),L=Object(l.a)(J,2),z=L[0],G=L[1],K=Object(a.useState)("all"),Q=Object(l.a)(K,2),U=Q[0],V=Q[1];return Object(a.useEffect)((function(){Object(s.d)("primaryenergy.csv",f).then((function(e){return o(e)})),Object(s.d)("energysectorco2.csv",j).then((function(e){return h(e)}))}),[]),Object(a.useEffect)((function(){if(n.length>0&&b.length>0){F(O(n,u[U],3));var e=[n[0].date.getFullYear(),b[0].date.getFullYear()];C(O(function(e,t){for(var n=[],r=e;r<t;r++)n.push({date:new Date(r,0,1),heavyoil:0,lightoil:0,transportoil:0,coal:0,naturalgas:0,peat:0,otherfossil:0,wood:0,otherbio:0});return n}(e[0],e[1]).concat(b),d[U],3)),T(g(u[U])),P(g(d[U]))}}),[n,b,U]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{className:"left column",children:[Object(r.jsx)("h1",{children:"Energy consumption by source"}),Object(r.jsx)(y,{data:N,frame:I,setFrame:Y,pause:z,names:p,colors:H}),Object(r.jsx)(m,{unit:"TJ",data:N,frame:I,setFrame:Y,keys:u[U],colors:H})]}),Object(r.jsxs)("div",{className:"right column",children:[Object(r.jsx)("h1",{children:"Energy sector carbon dioxide emissions"}),Object(r.jsx)(y,{data:E,frame:I,setFrame:Y,pause:z,names:p,colors:M,reverse:!0}),Object(r.jsx)(m,{unit:"10\u2079 CO\u2082",data:E,frame:I,setFrame:Y,keys:d[U],colors:M,target:.4*52.6})]}),Object(r.jsxs)("div",{className:"center",children:[Object(r.jsx)(v,{data:N,frame:I,pause:z,setPause:G,setFilter:V}),"heating"===U&&Object(r.jsx)("p",{children:"Includes combined electricity production."}),"electricity"===U&&Object(r.jsx)("p",{children:"Excludes electricity from combined heat production."})]}),Object(r.jsx)("button",{className:"transparency",title:"Transparency Badge",children:"\ud83d\udd75\ufe0f"})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,196)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),w()}},[[195,1,2]]]);
//# sourceMappingURL=main.6beeb07e.chunk.js.map